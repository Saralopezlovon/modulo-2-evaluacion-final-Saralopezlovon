"use strict";const characterElement=document.querySelector(".js-character"),btn=document.querySelector(".js-find"),containerElement=document.querySelector(".js-container"),containerFavElement=document.querySelector(".js-container-fav");let shows=[],favoritesShows=[];function setLocalStorage(){localStorage.setItem("favoritesShows",JSON.stringify(favoritesShows))}function getLocalStorage(){const e=localStorage.getItem("favoritesShows"),s=JSON.parse(e);null!==s&&(favoritesShows=s,paintFavShows(),listenShows())}const search=function(e){e.preventDefault(),fetch("http://api.tvmaze.com/search/shows?q="+characterElement.value).then(function(e){return e.json()}).then(function(e){shows=e,paintShows(),listenShows()}).catch(function(e){console.log("Error al traer los datos del servidor",e)})};function paintFavShows(){let e="<ul>";for(let s=0;s<favoritesShows.length;s++)e+=`<li class="shows__item-fav js-shows-item" id="${favoritesShows[s].id}">`,e+=`<h2 class="shows__name-fav">${favoritesShows[s].name}</h2>`,null===favoritesShows[s].image?e+='<img class="image shows__imagefav" src="https://via.placeholder.com/210x295/ffffff/666666/?\n      text=TV.">':e+=`<img class="image shows__imagefav" src="${favoritesShows[s].image.medium}">`,e+='<div class="button-remove js-shows-item">X</div>',e+="</li>";e+="</ul>",containerFavElement.innerHTML=e}function paintShows(){let e="<ul>";for(let s=0;s<shows.length;s++)e+=`<li class="shows__item js-shows-item" id="${shows[s].show.id}">`,e+=`<h2 class="shows__name">${shows[s].show.name}</h2>`,null===shows[s].show.image?e+='<img class="image" src="https://via.placeholder.com/210x295/ffffff/666666/?\n      text=TV.">':e+=`<img class="image" src="${shows[s].show.image.medium}">`,e+="</li>";e+="</ul>",containerElement.innerHTML=e}function toggleFavorites(e){const s=parseInt(e.currentTarget.id),t=favoritesShows.findIndex(function(e,t){return e.id===s});if(!0===(-1!==t))favoritesShows.splice(t,1);else for(let e=0;e<shows.length;e++)shows[e].show.id===s&&favoritesShows.push(shows[e].show);setLocalStorage(),paintFavShows(),listenShows()}function listenShows(){const e=document.querySelectorAll(".js-shows-item");for(const s of e)s.addEventListener("click",toggleFavorites)}getLocalStorage(),btn.addEventListener("click",search);